const express = require('express')
const router = express.Router()
const multer = require('multer')
const authenticate = require('../utils/authenticate')
const upload = multer()

const postCreate = require('../controller/posts/postCreate')
const postUpdate = require('../controller/posts/postUpdate')
const postDelete = require('../controller/posts/postDelete')
const postToggleBookmarks = require('../controller/posts/postToggleBookmarks')
const postToggleLikes = require('../controller/posts/postToggleLikes')
const getAllPosts = require('../controller/posts/getAllPosts')
const getPostsByUserId = require('../controller/posts/getPostsByUserId')
const getPostsByBookmarkedUser = require('../controller/posts/getPostsByBookmarkedUser')
const getPostsByTag = require('../controller/posts/getPostsByTag')
const getPostsByPlaceId = require('../controller/posts/getPostsByPlaceId')
const getAllPostsTags = require('../controller/posts/getAllPostsTags')
const getPostById = require('../controller/posts/getPostById')
const getPostByShortId = require('../controller/posts/getPostByShortId')

router.post('/post-create', authenticate(), upload.single('titleImage'), postCreate)
router.patch('/post-update', authenticate(), upload.single('titleImage'), postUpdate)
router.delete('/post-delete', authenticate(), postDelete)
router.post('/post-toggle-likes', authenticate(), postToggleLikes)
router.post('/post-toggle-bookmarks', authenticate(), postToggleBookmarks)
router.get('/get-all-posts', getAllPosts)
router.get('/get-posts-by-user-id/:userId', getPostsByUserId)
router.get('/get-posts-by-place-id/:placeId', getPostsByPlaceId)
router.get('/get-posts-by-bookmarked-user/:userId', getPostsByBookmarkedUser)
router.get('/get-posts-by-tag/:tag', getPostsByTag)
router.get('/get-all-posts-tags', getAllPostsTags)
router.get('/get-post-by-id/:postId', getPostById)
router.get('/get-post-by-short-id/:shortId', getPostByShortId)

module.exports = router
